#!/bin/bash

########################################################################################################################
# Bash settings ########################################################################################################
########################################################################################################################
# abort on nonzero exitstatus
set -o errexit
# abort on unbound variable
set -o nounset
# don't hide errors within pipes
set -o pipefail
# enable expansion of variables
# set -o xtrace # Uncomment this line for debugging purposes

########################################################################################################################
# Arguments ############################################################################################################
########################################################################################################################
URL=$1
SLEEP=$2
ENDPOINT=$3
TOPIC=$4

########################################################################################################################
# Run ##################################################################################################################
########################################################################################################################
TAG="0.1.0"
IMAGE_NAME=listener

docker run  --name "${IMAGE_NAME}" \
            --rm \
            -e TOPIC "${TOPIC}" \
            "${IMAGE_NAME}:${TAG}"

